name: CI
on:
  push:
    branches:
      stl-container
jobs:
  Lint:
    runs-on: ubuntu-latest
    container: geogreck/cpp-container
    steps:
      - uses: actions/checkout@v3
      - name: Lint
        run: |
          cmake -S . -B build
          cmake --build build --target stl_container_LINT

  Build:
    runs-on: ubuntu-latest
    container: geogreck/cpp-container
    needs: [Lint]
    steps:
      - uses: actions/checkout@v3
      - name: Build
        run: |
          cmake -S . -B build
          cmake --build build

  Test:
    runs-on: ubuntu-latest
    container: geogreck/cpp-container
    needs: [Lint, Build]
    steps:
      - uses: actions/checkout@v3
      - name: Test
        run: |
          cmake -S . -B build
          cmake --build build --target stl_container_TEST
